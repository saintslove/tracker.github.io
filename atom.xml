<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Fox Mask</title>
  
  <subtitle>thick and thin</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://www.saintslove.top/"/>
  <updated>2018-05-16T00:43:51.887Z</updated>
  <id>https://www.saintslove.top/</id>
  
  <author>
    <name>Fox Mask</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Go多进程---信号</title>
    <link href="https://www.saintslove.top/2018/05/15/Go%E5%A4%9A%E8%BF%9B%E7%A8%8B-%E4%BF%A1%E5%8F%B7/"/>
    <id>https://www.saintslove.top/2018/05/15/Go多进程-信号/</id>
    <published>2018-05-15T12:52:32.000Z</published>
    <updated>2018-05-16T00:43:51.887Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>&ensp;查看<a href="https://github.com/saintslove/example.v2/blob/master/src/gopcp.v2/chapter3/signal/signal.go" target="_blank" rel="noopener">完整示例程序</a>或<a id="download" href="https://git-scm.com/download/win" target="_blank" rel="noopener"><i class="fa fa-download"></i><span>点击下载</span> </a></p><p>&ensp;<code>os.Signal</code>接口类型如下：</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// A Signal represents an operating system signal.</span></span><br><span class="line"><span class="comment">// The usual underlying implementation is operating system-dependent:</span></span><br><span class="line"><span class="comment">// on Unix it is syscall.Signal.</span></span><br><span class="line"><span class="keyword">type</span> Signal <span class="keyword">interface</span> &#123;</span><br><span class="line">    <span class="built_in">String</span>() <span class="built_in">string</span></span><br><span class="line">    Signal() <span class="comment">// to distinguish from other Stringers</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>&ensp;<code>Signal</code>方法没有实际意义，仅作为区别其他信号的标识，在GO标准库中，所有实现此接口类型的值均可作为操作系统信号。操作系统信号量类型均为<code>syscall.Sinal</code>,其为<code>os.Signal</code>接口的实现类，每一个信号常量均为隐含式整数，其整数值与所在操作系统代表的信号常量编号一致。</p><p>&ensp;<code>Notify</code>函数用于监控操作系统向当前进程所发的指定信号，其实现如下：</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Notify causes package signal to relay incoming signals to c.</span></span><br><span class="line"><span class="comment">// If no signals are provided, all incoming signals will be relayed to c.</span></span><br><span class="line"><span class="comment">// Otherwise, just the provided signals will.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// Package signal will not block sending to c: the caller must ensure</span></span><br><span class="line"><span class="comment">// that c has sufficient buffer space to keep up with the expected</span></span><br><span class="line"><span class="comment">// signal rate. For a channel used for notification of just one signal value,</span></span><br><span class="line"><span class="comment">// a buffer of size 1 is sufficient.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// It is allowed to call Notify multiple times with the same channel:</span></span><br><span class="line"><span class="comment">// each call expands the set of signals sent to that channel.</span></span><br><span class="line"><span class="comment">// The only way to remove signals from the set is to call Stop.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// It is allowed to call Notify multiple times with different channels</span></span><br><span class="line"><span class="comment">// and the same signals: each channel receives copies of incoming</span></span><br><span class="line"><span class="comment">// signals independently.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Notify</span><span class="params">(c <span class="keyword">chan</span>&lt;- os.Signal, sig ...os.Signal)</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> c == <span class="literal">nil</span> &#123;</span><br><span class="line">        <span class="built_in">panic</span>(<span class="string">"os/signal: Notify using nil channel"</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    handlers.Lock()</span><br><span class="line">    <span class="keyword">defer</span> handlers.Unlock()</span><br><span class="line"></span><br><span class="line">    h := handlers.m[c]</span><br><span class="line">    <span class="keyword">if</span> h == <span class="literal">nil</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> handlers.m == <span class="literal">nil</span> &#123;</span><br><span class="line">            handlers.m = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">chan</span>&lt;- os.Signal]*handler)</span><br><span class="line">        &#125;</span><br><span class="line">        h = <span class="built_in">new</span>(handler)</span><br><span class="line">        handlers.m[c] = h</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    add := <span class="function"><span class="keyword">func</span><span class="params">(n <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">        <span class="keyword">if</span> n &lt; <span class="number">0</span> &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> !h.want(n) &#123;</span><br><span class="line">            h.set(n)</span><br><span class="line">            <span class="keyword">if</span> handlers.ref[n] == <span class="number">0</span> &#123;</span><br><span class="line">                enableSignal(n)</span><br><span class="line">            &#125;</span><br><span class="line">            handlers.ref[n]++</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(sig) == <span class="number">0</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> n := <span class="number">0</span>; n &lt; numSig; n++ &#123;</span><br><span class="line">            add(n)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> _, s := <span class="keyword">range</span> sig &#123;</span><br><span class="line">            add(signum(s))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>&ensp;参量<code>c chan&lt;- os.Signal</code>为发送通道，即仅可想其发送<code>os.Signal</code>类型的信号，参量<code>sig ...os.Signal</code>即为自定义信号量集合，当该参量为空，表示所有接收的常量信号均为自定义信号，逐一封装并存入<code>c chan&lt;- os.Signal</code>通道,coder如下：</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(sig) == <span class="number">0</span> &#123;</span><br><span class="line">       <span class="keyword">for</span> n := <span class="number">0</span>; n &lt; numSig; n++ &#123;</span><br><span class="line">           add(n)</span><br><span class="line">       &#125;</span><br><span class="line">   &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">       <span class="keyword">for</span> _, s := <span class="keyword">range</span> sig &#123;</span><br><span class="line">           add(signum(s))</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>&ensp;<code>Notify</code>函数以<code>c chan&lt;- os.Signal</code>接收通道为唯一标识符处理相应的信号集合，源码中信号集合字典<code>m map[chan&lt;- os.Signal]*handler</code>以signal接受通道及信号集合变体为键值对，若该键值对不存在，则注册信号接收申请，否则更新相应的键值对，coder如下：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">h := handlers<span class="selector-class">.m</span>[c]</span><br><span class="line">   <span class="keyword">if</span> h == nil &#123;</span><br><span class="line">       <span class="keyword">if</span> handlers<span class="selector-class">.m</span> == nil &#123;</span><br><span class="line">           handlers<span class="selector-class">.m</span> = make(map[chan&lt;- os.Signal]*handler)</span><br><span class="line">       &#125;</span><br><span class="line">       h = new(handler)</span><br><span class="line">       handlers<span class="selector-class">.m</span>[c] = h</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>&ensp;若自定义信号量为<code>syscall.SIGQUIT</code>及<code>syscall.SIGINT</code>，示例如下：</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">sigRecv1 := <span class="built_in">make</span>(<span class="keyword">chan</span> os.Signal, <span class="number">1</span>)</span><br><span class="line">sigs1 := []os.Signal&#123;syscall.SIGINT, syscall.SIGQUIT&#125;</span><br><span class="line">fmt.Printf(<span class="string">"Set notification for %s... [sigRecv1]\n"</span>, sigs1)</span><br><span class="line">signal.Notify(sigRecv1, sigs1...)</span><br><span class="line">fmt.Println(<span class="string">"Wait for 2 seconds... "</span>)</span><br><span class="line">time.Sleep(<span class="number">2</span> * time.Second)</span><br><span class="line">fmt.Printf(<span class="string">"Stop notification..."</span>)</span><br><span class="line"><span class="keyword">for</span> _, sig := <span class="keyword">range</span> sigRecv1&#123;</span><br><span class="line">    fmt.Printf(<span class="string">"Receive a signal:%s\n"</span>,sig)</span><br><span class="line">&#125;</span><br><span class="line">signal.Stop(sigRecv1)</span><br><span class="line"><span class="built_in">close</span>(sigRecv1)</span><br></pre></td></tr></table></figure><p>&ensp;<code>Stop</code>函数用于恢复系统对其默认操作，其声明如下,但其signal接受通道参量必须与<code>Notify</code>函数signal信号接收通道为同一参量，调用之后signal接受通道不在接收任何常量信号，会导致示例中<code>for</code>语句阻塞，为此，可通过<code>close</code>函数关闭signal接收通道</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// <span class="keyword">Stop</span> causes <span class="keyword">package</span> signal <span class="keyword">to</span> <span class="keyword">stop</span> relaying incoming signals <span class="keyword">to</span> c.</span><br><span class="line">// It undoes the effect <span class="keyword">of</span> all <span class="keyword">prior</span> calls <span class="keyword">to</span> Notify <span class="keyword">using</span> c.</span><br><span class="line">// <span class="keyword">When</span> <span class="keyword">Stop</span> <span class="keyword">returns</span>, it <span class="keyword">is</span> guaranteed that c will receive <span class="keyword">no</span> more signals.</span><br><span class="line">func <span class="keyword">Stop</span>(c chan&lt;- os.Signal)</span><br><span class="line"></span><br><span class="line">// The <span class="keyword">close</span> built-<span class="keyword">in</span> <span class="keyword">function</span> closes a channel, which must be either</span><br><span class="line">// bidirectional <span class="keyword">or</span> send-only. It should be executed <span class="keyword">only</span> <span class="keyword">by</span> the sender,</span><br><span class="line">// <span class="keyword">never</span> the receiver, <span class="keyword">and</span> has the effect <span class="keyword">of</span> shutting down the channel <span class="keyword">after</span></span><br><span class="line">// the <span class="keyword">last</span> sent <span class="keyword">value</span> <span class="keyword">is</span> received. <span class="keyword">After</span> the <span class="keyword">last</span> <span class="keyword">value</span> has been received</span><br><span class="line">// <span class="keyword">from</span> a closed channel c, <span class="keyword">any</span> receive <span class="keyword">from</span> c will succeed <span class="keyword">without</span></span><br><span class="line">// blocking, <span class="keyword">returning</span> the zero <span class="keyword">value</span> <span class="keyword">for</span> the channel element. The <span class="keyword">form</span></span><br><span class="line">//  x, ok := &lt;-c</span><br><span class="line">// will also <span class="keyword">set</span> ok <span class="keyword">to</span> <span class="literal">false</span> <span class="keyword">for</span> a closed channel.</span><br><span class="line">func <span class="keyword">close</span>(c chan&lt;- <span class="keyword">Type</span>)</span><br></pre></td></tr></table></figure><p>&ensp;若前后signal接受通道不同，signal处理程序会视为两个完全不同的操作，其实际效果如下：</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sigRecv1 := <span class="built_in">make</span>(<span class="keyword">chan</span> os.Signal, <span class="number">1</span>)</span><br><span class="line">sigs1 := []os.Signal&#123;syscall.SIGINT, syscall.SIGQUIT&#125;</span><br><span class="line">fmt.Printf(<span class="string">"Set notification for %s... [sigRecv1]\n"</span>, sigs1)</span><br><span class="line">signal.Notify(sigRecv1, sigs1...)</span><br><span class="line">   </span><br><span class="line">sigRecv2 := <span class="built_in">make</span>(<span class="keyword">chan</span> os.Signal, <span class="number">1</span>)</span><br><span class="line">sigs2 := []os.Signal&#123;syscall.SIGQUIT&#125;</span><br><span class="line">fmt.Printf(<span class="string">"Set notification for %s... [sigRecv2]\n"</span>, sigs2)</span><br><span class="line">signal.Notify(sigRecv2, sigs2...)</span><br></pre></td></tr></table></figure><p>&ensp;<code>for</code>语句的阻塞会影响程序的并发运行，需要通过<code>go chan</code>协程，同时为保障主程序在并发执行程序完成后退出，需要通过<code>WaitGroup</code>保障，示例如下：</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">sigRecv1 := <span class="built_in">make</span>(<span class="keyword">chan</span> os.Signal, <span class="number">1</span>)</span><br><span class="line">sigs1 := []os.Signal&#123;syscall.SIGINT, syscall.SIGQUIT&#125;</span><br><span class="line">fmt.Printf(<span class="string">"Set notification for %s... [sigRecv1]\n"</span>, sigs1)</span><br><span class="line">signal.Notify(sigRecv1, sigs1...)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> wg sync.WaitGroup</span><br><span class="line">wg.Add(<span class="number">2</span>)</span><br><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> sig := <span class="keyword">range</span> sigRecv1 &#123;</span><br><span class="line">        fmt.Printf(<span class="string">"Received a signal from sigRecv1: %s\n"</span>, sig)</span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Printf(<span class="string">"End. [sigRecv1]\n"</span>)</span><br><span class="line">    wg.Done()</span><br><span class="line">&#125;()</span><br><span class="line"></span><br><span class="line">signal.Stop(sigRecv1)</span><br><span class="line"><span class="built_in">close</span>(sigRecv1)</span><br><span class="line">fmt.Printf(<span class="string">"done. [sigRecv1]\n"</span>)</span><br><span class="line">wg.Wait()</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      “多进程-signal”
    
    </summary>
    
      <category term="Go多进程" scheme="https://www.saintslove.top/categories/Go%E5%A4%9A%E8%BF%9B%E7%A8%8B/"/>
    
    
      <category term="go" scheme="https://www.saintslove.top/tags/go/"/>
    
      <category term="signal" scheme="https://www.saintslove.top/tags/signal/"/>
    
  </entry>
  
  <entry>
    <title>GO进程管理</title>
    <link href="https://www.saintslove.top/2018/05/11/Go%E8%AF%AD%E6%B3%95%E6%97%A5%E5%BF%97/"/>
    <id>https://www.saintslove.top/2018/05/11/Go语法日志/</id>
    <published>2018-05-11T06:28:51.000Z</published>
    <updated>2018-05-15T14:35:29.930Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h4 id="进程的状态"><a href="#进程的状态" class="headerlink" title="进程的状态"></a><div class="note primary"><p>进程的状态</p></div></h4><p><img src="http://p7vw4w30r.bkt.clouddn.com/linux%E8%BF%9B%E7%A8%8B%E7%8A%B6%E6%80%81%E8%BD%AC%E6%8D%A2.png" alt="linux进程状态转换"></p><ul><li>&ensp;可中断睡眠状态(S)：处于此状态的进程会被等待事件激活，否则被放入对应的事件等待队列</li><li>&ensp;不可中断睡眠状态(D)：处于该状态的进程不会对外界事件做出响应，直至退出该状态，事件信号才会传给该进程</li><li>&ensp;暂停或跟踪状态(T)：信号<code>SIGSTOP</code>会使相应进程转入该状态，除非进程处于不可中断睡眠状态，通过信号<code></code>SIGCONT`会使进程转入可运行状态</li></ul>]]></content>
    
    <summary type="html">
    
      “Go进程管理的基础知识”
    
    </summary>
    
      <category term="Go多进程" scheme="https://www.saintslove.top/categories/Go%E5%A4%9A%E8%BF%9B%E7%A8%8B/"/>
    
    
      <category term="go" scheme="https://www.saintslove.top/tags/go/"/>
    
  </entry>
  
  <entry>
    <title>Git第二弹</title>
    <link href="https://www.saintslove.top/2018/05/10/Git%E7%AC%AC%E4%BA%8C%E5%BC%B9/"/>
    <id>https://www.saintslove.top/2018/05/10/Git第二弹/</id>
    <published>2018-05-10T06:37:22.000Z</published>
    <updated>2018-05-10T12:26:36.419Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="1"><a href="#1" class="headerlink" title="1. "></a><span id="inline-toc"><em>1.</em></span> <em><span class="label primary">记录每次更新到仓库</span></em></h2><h4 id="查看已暂存与未暂存的修改"><a href="#查看已暂存与未暂存的修改" class="headerlink" title="查看已暂存与未暂存的修改"></a><div class="note primary"><p>查看已暂存与未暂存的修改</p></div></h4><p>&ensp;命令<code>git diff</code>可以解决两个问题：</p><ul><li>&ensp;<span id="inline-orange">查看已经更新但未暂存的文件</span>&ensp;&ensp;&ensp;使用命令<code>git diff</code></li><li>&ensp;<span id="inline-orange">查看已经暂存但未提交额文件</span>&ensp;&ensp;&ensp;使用命令<code>git diff --staged</code></li></ul><p>&ensp;若修改README文件并暂存，修改CONTRIBUTING.md文件不暂存，此时运行命令<code>git status</code>，显示如下：</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="keyword">echo</span> <span class="string">"My Project"</span> &gt;&gt; README</span><br><span class="line">$ git <span class="built_in">add</span> README</span><br><span class="line">$ <span class="keyword">echo</span> <span class="string">"# test line"</span> &gt;&gt; CONTRIBUTING.md</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes <span class="keyword">to</span> <span class="keyword">be</span> committed:</span><br><span class="line">(use <span class="string">"git reset HEAD &lt;file&gt;..."</span> <span class="keyword">to</span> unstage)</span><br><span class="line">modified: README</span><br><span class="line">Changes not staged <span class="keyword">for</span> commi<span class="variable">t:</span></span><br><span class="line">(use <span class="string">"git add &lt;file&gt;..."</span> <span class="keyword">to</span> <span class="keyword">update</span> what will <span class="keyword">be</span> committed)</span><br><span class="line">(use <span class="string">"git checkout -- &lt;file&gt;..."</span> <span class="keyword">to</span> discard <span class="keyword">changes</span> in working directory)</span><br><span class="line">modified: CONTRIBUTING.md</span><br></pre></td></tr></table></figure><p>&ensp;命令<code>git status</code>未显示尚未暂存文件CONTRIBUTING.md更新的具体内容，此时通过命令<br><code>git diff</code>可查看详细情况，<span id="inline-orange">该命令默认情况仅显示未暂存文件的更新部分</span>，所以当暂存了更新文件后，使用该命令未显示任何结果：</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git diff</span><br><span class="line">diff <span class="comment">--git a/CONTRIBUTING.md b/CONTRIBUTING.md</span></span><br><span class="line">index <span class="number">643e24</span>f.<span class="number">.87</span>f08c8 <span class="number">100644</span></span><br><span class="line"><span class="comment">--- a/CONTRIBUTING.md</span></span><br><span class="line">+++ b/CONTRIBUTING.md</span><br><span class="line">@@ <span class="number">-119</span>,<span class="number">3</span> +<span class="number">119</span>,<span class="number">4</span> @@ <span class="keyword">at</span> <span class="keyword">the</span></span><br><span class="line"><span class="comment">## Starter Projects</span></span><br><span class="line">See our [projects listhref=<span class="string">"https://github.com/libgit2/libgit2/blob/development/PROJECTS.md"</span>).</span><br><span class="line">+<span class="comment"># test line</span></span><br></pre></td></tr></table></figure><p>&ensp;若查看已暂存文件README的更新部分,通过加参数命令<code>git diff --staged</code>,显示如下：</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git diff <span class="comment">--staged</span></span><br><span class="line">diff <span class="comment">--git a/README b/README</span></span><br><span class="line"><span class="built_in">new</span> <span class="built_in">file</span> mode <span class="number">100644</span></span><br><span class="line">index <span class="number">0000000.</span><span class="number">.03902</span>a1</span><br><span class="line"><span class="comment">--- /dev/null</span></span><br><span class="line">+++ b/README</span><br><span class="line">@@ <span class="number">-0</span>,<span class="number">0</span> +<span class="number">1</span> @@</span><br><span class="line">+My Project</span><br></pre></td></tr></table></figure><p>&ensp;此时将CONTRIBUTING.md文件暂存，运行命令<code>git diff</code>，显示如下，;</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ git diff <span class="comment">--cached</span></span><br><span class="line">diff <span class="comment">--git a/CONTRIBUTING.md b/CONTRIBUTING.md</span></span><br><span class="line">index <span class="number">8</span>ebb991.<span class="number">.643e24</span>f <span class="number">100644</span></span><br><span class="line"><span class="comment">--- a/CONTRIBUTING.md</span></span><br><span class="line">+++ b/CONTRIBUTING.md</span><br><span class="line">@@ <span class="number">-65</span>,<span class="number">7</span> +<span class="number">65</span>,<span class="number">8</span> @@ branch directly, things can <span class="keyword">get</span> messy.</span><br><span class="line">Please include a nice description <span class="keyword">of</span> your changes when you submit your PR;</span><br><span class="line"><span class="keyword">if</span> we have <span class="keyword">to</span> <span class="built_in">read</span> <span class="keyword">the</span> whole diff <span class="keyword">to</span> figure out why you're contributing</span><br><span class="line"><span class="keyword">in</span> <span class="keyword">the</span> <span class="keyword">first</span> place, you're less likely <span class="keyword">to</span> <span class="keyword">get</span> feedback <span class="keyword">and</span> have your change</span><br><span class="line">-merged <span class="keyword">in</span>.</span><br><span class="line">+merged <span class="keyword">in</span>. Also, split your changes <span class="keyword">into</span> comprehensive chunks <span class="keyword">if</span> your patch <span class="keyword">is</span></span><br><span class="line">+longer than a dozen lines.</span><br><span class="line">If you are starting <span class="keyword">to</span> work <span class="keyword">on</span> a particular area, feel free <span class="keyword">to</span> submit a PR</span><br><span class="line"><span class="keyword">that</span> highlights your work <span class="keyword">in</span> progress (<span class="keyword">and</span> note <span class="keyword">in</span> <span class="keyword">the</span> PR title <span class="keyword">that</span> <span class="keyword">it</span>'s</span><br></pre></td></tr></table></figure><p>&ensp;未显示任何结果，因为README和CONTRIBUTING.md文件均已暂存，而<code>git diff</code>默认显示未暂存文件的更新部分。</p><h4 id="提交更新"><a href="#提交更新" class="headerlink" title="提交更新"></a><div class="note primary"><p>提交更新</p></div></h4><p>&ensp;<span id="inline-orange">切记，每次提交前务必运行命令<code>git status</code>查看文件状态，确保文件均已暂存</span>，随后可通过命令<code>git commit -m&quot;更新说明&quot;</code>提交暂存文件，比如：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="keyword">commit</span> -m <span class="string">"Story 182: Fix benchmarks for speed"</span></span><br><span class="line">[<span class="keyword">master</span> <span class="number">463</span>dc4f] Story <span class="number">182</span>: Fix benchmarks <span class="keyword">for</span> speed</span><br><span class="line"><span class="number">2</span> files <span class="keyword">changed</span>, <span class="number">2</span> insertions(+)</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">mode</span> <span class="number">100644</span> README</span><br></pre></td></tr></table></figure><p>&ensp;可以看到，本次在<code>master</code>分支执行提交操作，完整 SHA-1 校验和为463dc4f，以及修改及增删的记录，<span id="inline-orange">谨记，提交操作仅记录暂存区的快照，未暂存的仍保持已修改状态，每一次提交操作都是对项</span><span id="inline-orange">目的一次快照，便于后续的回溯及比较。</span></p><h4 id="跳过使用暂存区域"><a href="#跳过使用暂存区域" class="headerlink" title="跳过使用暂存区域"></a><div class="note primary"><p>跳过使用暂存区域</p></div></h4><p>&ensp;Git通过提供命令<code>git commit -a</code>跳过暂存区，在提交时，自动将所有被跟踪的文件暂存并一并提交，省略了命令<code>git add</code>操作：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes not staged for <span class="keyword">commit</span>:</span><br><span class="line">(<span class="keyword">use</span> <span class="string">"git add &lt;file&gt;..."</span> <span class="keyword">to</span> <span class="keyword">update</span> what will be committed)</span><br><span class="line">(<span class="keyword">use</span> <span class="string">"git checkout -- &lt;file&gt;..."</span> <span class="keyword">to</span> discard changes <span class="keyword">in</span> working <span class="keyword">directory</span>)</span><br><span class="line">modified: CONTRIBUTING.md</span><br><span class="line"><span class="keyword">no</span> changes added <span class="keyword">to</span> <span class="keyword">commit</span> (<span class="keyword">use</span> <span class="string">"git add"</span> <span class="keyword">and</span>/<span class="keyword">or</span> <span class="string">"git commit -a"</span>)</span><br><span class="line">$ git <span class="keyword">commit</span> -a -m <span class="string">'added new benchmarks'</span></span><br><span class="line">[<span class="keyword">master</span> <span class="number">83e38</span>c7] added <span class="keyword">new</span> benchmarks</span><br><span class="line"><span class="number">1</span> <span class="keyword">file</span> <span class="keyword">changed</span>, <span class="number">5</span> insertions(+), <span class="number">0</span> deletions(-)</span><br></pre></td></tr></table></figure><h4 id="移除文件"><a href="#移除文件" class="headerlink" title="移除文件"></a><div class="note primary"><p>移除文件</p></div></h4><p>&ensp;由于被跟踪文件在暂存区均存在记录，若想移除某个文件，需将其从暂存区移除，通过命令<code>git rm</code>可以完成，同时删除本地文件，避免其出现在未跟踪文件清单中。</p><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git rm PROJECTS.md</span><br><span class="line">rm <span class="symbol">'PROJECTS</span>.md'</span><br><span class="line">$ git status</span><br><span class="line"><span class="keyword">On</span> branch master</span><br><span class="line">Changes <span class="keyword">to</span> be committed:</span><br><span class="line">(<span class="keyword">use</span> <span class="string">"git reset HEAD &lt;file&gt;..."</span> <span class="keyword">to</span> unstage)</span><br><span class="line">deleted: PROJECTS.md</span><br></pre></td></tr></table></figure><p>&ensp;<span id="inline-orange">如果删除之前修改过并且已经放到暂存区域的话，则必须要用强制删除选项-f，这是一种安全特性，用于防止误删</span><span id="inline-orange">还没有添加到快照的数据，这样的数据不能被Git恢复。</span>当想在磁盘保留文件，但不想该文件被Git跟踪，除了在项目仓库增加<code>.gitignore</code>文件外，还可以通过命令<code>git rm --cached log/\*.log</code>，用于移除log/目录下扩展名为.log的所有文件。</p><h4 id="移动文件"><a href="#移动文件" class="headerlink" title="移动文件"></a><div class="note primary"><p>移动文件</p></div></h4><p>&ensp;Git通过命令<code>git mv</code>实现文件重命名，比如：</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>git mv README.md README</span><br><span class="line"><span class="variable">$ </span>git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be <span class="symbol">committed:</span></span><br><span class="line">(<span class="keyword">use</span> <span class="string">"git reset HEAD &lt;file&gt;..."</span> to unstage)</span><br><span class="line"><span class="symbol">renamed:</span> README.md -&gt; README</span><br></pre></td></tr></table></figure><p>&ensp;该指令相当于执行以下三条指令：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mv README<span class="selector-class">.md</span> README</span><br><span class="line">git rm README.md</span><br><span class="line">git add README</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      查看已暂存与未暂存的修改、提交更新、跳过使用暂存区域、移除/移动文件
    
    </summary>
    
      <category term="Git教程" scheme="https://www.saintslove.top/categories/Git%E6%95%99%E7%A8%8B/"/>
    
    
      <category term="git" scheme="https://www.saintslove.top/tags/git/"/>
    
      <category term="集中式版本控制" scheme="https://www.saintslove.top/tags/%E9%9B%86%E4%B8%AD%E5%BC%8F%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/"/>
    
  </entry>
  
  <entry>
    <title>Git第一弹</title>
    <link href="https://www.saintslove.top/2018/05/09/Git%E7%AC%AC%E4%B8%80%E5%BC%B9/"/>
    <id>https://www.saintslove.top/2018/05/09/Git第一弹/</id>
    <published>2018-05-09T09:43:17.000Z</published>
    <updated>2018-05-15T14:33:53.210Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="1"><a href="#1" class="headerlink" title="1. "></a><span id="inline-toc"><em>1.</em></span> <em><span class="label primary">获取Git仓库</span></em></h2><h4 id="在现有目录中创建仓库"><a href="#在现有目录中创建仓库" class="headerlink" title="在现有目录中创建仓库 "></a><div class="note primary"><p>在现有目录中创建仓库 </p></div></h4><p>&ensp;若是管理现有项目，需在项目所在目录通过命令<code>git init</code>进行初始化操作<br>，该命令在项目所在目录生成隐含文件夹<code>.git</code>，包含初始化仓库必要文件，但项目文件并未被跟踪，因此还需跟踪这些文件并提交至仓库。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git add .</span><br><span class="line">$ git commit -m<span class="string">'修改描述'</span></span><br></pre></td></tr></table></figure></p><h4 id="克隆现有仓库"><a href="#克隆现有仓库" class="headerlink" title="克隆现有仓库 "></a><div class="note primary"><p>克隆现有仓库 </p></div></h4><p>&ensp;若想将一已存在仓库克隆值本地，需使用<code>git clone [url]</code>命令，该命令会将远程仓库每一个文件克隆至本地，对于Git可链接库<code>libgit2</code>，可通过日下如下命令实现远程克隆：<br><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="keyword">clone</span> <span class="title">https</span>://github.com/libgit2/libgit2</span><br></pre></td></tr></table></figure></p><p>&ensp;此时会在当前目录下创建名为<code>libgit2</code>的目录，并在该目录下初始化一个隐含的<code>.git</code>文件，远程仓库拉取的数据均存入<code>.git</code>文件，并从中读取最新版本的文件拷贝。<br>&ensp;若想将<code>libgit2</code>克隆至自定义的仓库<code>mylibgit</code>时，可使用如下命令：<br><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="keyword">clone</span> <span class="title">https</span>://github.com/libgit2/libgit2 mylibgit</span><br></pre></td></tr></table></figure></p><p>&ensp;本次使用的<code>https://</code>协议，Git同时支持多种传输协议，包括<code>git://</code>协议，<code>SSH</code>协议，比如<code>user@server:path/to/repo.git</code>，在服务器上搭建 Git将会介绍所有这些协议在服务器端如何配置使用，以及各种方式之间的利弊。</p><hr><h2 id="2"><a href="#2" class="headerlink" title="2. "></a><span id="inline-toc"><em>2.</em></span> <em><span class="label primary">记录每次更新到仓库</span></em></h2><p>&ensp;工作目录下的每一个文件均呈现两种状态，<span id="inline-orange">已跟踪</span>或<span id="inline-orange">未跟踪</span>。已跟踪文件指被纳入版本控制系统的文件，在上一次快照中存在记录，在工作一段时间后，该文件可能被修改、未修改或存放于暂存区；剩余文件均处于未跟踪状态，均不存在于暂存区及最近一次的快照记录。初次克隆仓库中的文件均处于被跟踪状态。Git会对被修改的文件添加修改标记，Git文件的生命周期如下所示：<br><img src="http://p7vw4w30r.bkt.clouddn.com/%E6%96%87%E4%BB%B6%E7%8A%B6%E6%80%81%E5%8F%98%E5%8C%96%E5%91%A8%E6%9C%9F.png" alt="文件状态变化周期"></p><h4 id="检查当前文件状态"><a href="#检查当前文件状态" class="headerlink" title="检查当前文件状态 "></a><div class="note primary"><p>检查当前文件状态 </p></div></h4><p>&ensp;使用<code>git status</code>命令，对于初始克隆仓库，该命令显示结果如下：<br><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch <span class="literal">master</span></span><br><span class="line">nothing to commit, working directory clean</span><br></pre></td></tr></table></figure></p><p>&ensp;表明工作区很干净，即已跟踪文件未被更改，此外还表明该目录未出现未被跟踪的文件，且当前处于<code>master</code>分支。此时新建README文件，使用<code>git status</code>命令显示如下:<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="keyword">echo</span> <span class="string">'My Project'</span> &gt; README</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Untracked <span class="keyword">file</span><span class="variable">s:</span></span><br><span class="line">(use <span class="string">"git add &lt;file&gt;..."</span> <span class="keyword">to</span> include in what will <span class="keyword">be</span> committed)</span><br><span class="line">README</span><br><span class="line">nothing added <span class="keyword">to</span> commit but untracked <span class="keyword">files</span> present (use <span class="string">"git add"</span> <span class="keyword">to</span> track)</span><br></pre></td></tr></table></figure></p><p>&ensp;状态显示README文件出现在Untracked files区域，表明该文件在之前的快照中不存在，<span id="inline-orange">Git不会自动将文件纳入跟踪范围</span>，除非明确告知Git需要跟踪该文件。</p><h4 id="跟踪新文件"><a href="#跟踪新文件" class="headerlink" title="跟踪新文件"></a><div class="note primary"><p>跟踪新文件</p></div></h4><p>&ensp;<code>git add</code>用于跟踪新文件或已跟踪文件存入暂存区，还能用于合并时把有冲突的文件标记为已解决状态等，将这个命令理解为“添加内容到下一次提交中”而不是“将一个文件添加到项目中”要更加合适，用法如下：</p><ul><li>&ensp;<code>git add [file]</code>&ensp;&ensp;&ensp;跟踪文件file</li><li>&ensp;<code>git add [Dir]</code>&ensp;&ensp;&ensp;递归跟踪路径Dir下的所有文件</li></ul><p>&ensp;跟踪README文件需使用<code>git add</code>命令，运行如下：<br><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="keyword">add</span><span class="bash"> README</span></span><br></pre></td></tr></table></figure></p><p>&ensp;随后运行<code>git status</code>命令，观察README文件新状态如下：<br><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line"><span class="keyword">On</span> branch master</span><br><span class="line">Changes <span class="keyword">to</span> be committed:</span><br><span class="line">(<span class="keyword">use</span> <span class="string">"git reset HEAD &lt;file&gt;..."</span> <span class="keyword">to</span> unstage)</span><br><span class="line"><span class="keyword">new</span> <span class="keyword">file</span>: README</span><br></pre></td></tr></table></figure></p><p>&ensp;<span id="inline-orange">Changes to be committed:</span>表明文件README已处于暂存状态，位于暂存区，一旦提交，该文件将被Git快照记录。</p><h4 id="暂存已修改文件"><a href="#暂存已修改文件" class="headerlink" title="暂存已修改文件"></a><div class="note primary"><p>暂存已修改文件</p></div></h4><p>&ensp;修改已跟踪文件CONTRIBUTING.md，随机运行命令<code>git status</code>，显示如下：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">(<span class="keyword">use</span> <span class="string">"git reset HEAD &lt;file&gt;..."</span> <span class="keyword">to</span> unstage)</span><br><span class="line"><span class="keyword">new</span> <span class="keyword">file</span>: README</span><br><span class="line">Changes <span class="keyword">not</span> staged <span class="keyword">for</span> <span class="keyword">commit</span>:</span><br><span class="line">(<span class="keyword">use</span> <span class="string">"git add &lt;file&gt;..."</span> <span class="keyword">to</span> <span class="keyword">update</span> what will be committed)</span><br><span class="line">(<span class="keyword">use</span> <span class="string">"git checkout -- &lt;file&gt;..."</span> <span class="keyword">to</span> discard changes <span class="keyword">in</span> working <span class="keyword">directory</span>)</span><br><span class="line">modified: CONTRIBUTING.md</span><br></pre></td></tr></table></figure></p><p>&ensp;<span id="inline-orange">Changes not staged for commit:</span>表明CONTRIBUTING.md被更改但并未存入暂存区，运行命令<code>git add CONTRIBUTING.md</code>，显示如下：<br><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git add CONTRIBUTING.md</span><br><span class="line">$ git status</span><br><span class="line"><span class="keyword">On</span> branch master</span><br><span class="line">Changes <span class="keyword">to</span> be committed:</span><br><span class="line">(<span class="keyword">use</span> <span class="string">"git reset HEAD &lt;file&gt;..."</span> <span class="keyword">to</span> unstage)</span><br><span class="line"><span class="keyword">new</span> <span class="keyword">file</span>: README</span><br><span class="line">modified: CONTRIBUTING.md</span><br></pre></td></tr></table></figure></p><p>&ensp;<span id="inline-orange">Changes to be committed:</span>，表明文件CONTRIBUTING.md已被存入暂存区，此时对CONTRIBUTING.md再次修改并存盘，随即运行命令<code>git status</code>，显示如下：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ vim CONTRIBUTING.md</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">(<span class="keyword">use</span> <span class="string">"git reset HEAD &lt;file&gt;..."</span> <span class="keyword">to</span> unstage)</span><br><span class="line"><span class="keyword">new</span> <span class="keyword">file</span>: README</span><br><span class="line">modified: CONTRIBUTING.md</span><br><span class="line">Changes <span class="keyword">not</span> staged <span class="keyword">for</span> <span class="keyword">commit</span>:</span><br><span class="line">(<span class="keyword">use</span> <span class="string">"git add &lt;file&gt;..."</span> <span class="keyword">to</span> <span class="keyword">update</span> what will be committed)</span><br><span class="line">(<span class="keyword">use</span> <span class="string">"git checkout -- &lt;file&gt;..."</span> <span class="keyword">to</span> discard changes <span class="keyword">in</span> working <span class="keyword">directory</span>)</span><br><span class="line">modified: CONTRIBUTING.md</span><br></pre></td></tr></table></figure></p><p>&ensp;可以看到CONTRIBUTING.md同时存在于<span id="inline-orange">Changes to be committed:</span>与<span id="inline-orange">Changes not staged for commit:</span>，因为Git仅暂存了运行<code>git add</code>命令的版本，因此在修改文件后续运行命令<code>git add</code>重新跟踪文件。<br><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git add CONTRIBUTING.md</span><br><span class="line">$ git status</span><br><span class="line"><span class="keyword">On</span> branch master</span><br><span class="line">Changes <span class="keyword">to</span> be committed:</span><br><span class="line">(<span class="keyword">use</span> <span class="string">"git reset HEAD &lt;file&gt;..."</span> <span class="keyword">to</span> unstage)</span><br><span class="line"><span class="keyword">new</span> <span class="keyword">file</span>: README</span><br><span class="line">modified: CONTRIBUTING.md</span><br></pre></td></tr></table></figure></p><p>&ensp;可通过运行命令<code>git status -s</code>获得文件状态的简明报告，输出如下：<br><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git status -s</span><br><span class="line">M README</span><br><span class="line">MM Rakefile</span><br><span class="line">A <span class="class"><span class="keyword">lib</span>/<span class="title">git</span>.<span class="title">rb</span></span></span><br><span class="line">M <span class="class"><span class="keyword">lib</span>/<span class="title">simplegit</span>.<span class="title">rb</span></span></span><br><span class="line">?? LICENSE.txt</span><br></pre></td></tr></table></figure></p><ul><li>&ensp;<span id="inline-orange">??</span>&ensp;&ensp;LICENSE.txt为新添加的未被跟踪文件</li><li>&ensp;<span id="inline-orange">M</span>&ensp;&ensp;README在工作区被修改但并未存入暂存区</li><li>&ensp;<span id="inline-orange">A</span>&ensp;&ensp;lib/git.rb被修改后并添加至暂存区</li><li>&ensp;<span id="inline-orange">MM</span>&ensp;&ensp;左侧M表示Rakefile被修改并放入暂存区,右侧M表示Rakefile被修改但未存入暂存区,因此Rakefile在工作区被修改并提交到暂存区后又在工作区中被修改了,所以在暂存区和工作区都有该文件被修改了的记录</li></ul><h4 id="忽略文件"><a href="#忽略文件" class="headerlink" title="忽略文件"></a><div class="note primary"><p>忽略文件</p></div></h4><p>&ensp;对于不想出现在未跟踪文件列表或无需纳入Git管理的文件,可以通过创建文件<code>.gitignore</code>,列出要忽略的文件模式，模式采用<code>shell</code>格式,文件.gitignore 的格式规范如下,更多内容可访问<a href="https://github.com/github/gitignore" target="_blank" rel="noopener">.gitignore文件列表</a>：</p><ul><li>所有空行或者以＃开头的行都会被 Git 忽略</li><li>可以使用标准的glob模式匹配</li><li>匹配模式可以以/开头防止递归</li><li>匹配模式可以以/结尾指定目录</li><li>要忽略指定模式以外的文件或目录，可以在模式前加上惊叹号（!）取反</li></ul><p>&ensp;所谓的 glob 模式是指 shell所使用的简化了的正则表达式。星号(*)匹配零个或多个任意字符;[abc] 匹配任何一个列在方括号中的字符（这个例子要么匹配一个a,要么匹配一个b,要么匹配一个 c；问号(?)只匹配一个任意字符；[0-9] 匹配所有0到9的数字;使用两个星号(**) 表示匹配任意中间目录,比如a/**/z可以匹配a/z,a/b/z 或 a/b/c/z等。<br>实例如下：<br><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># no .a files</span></span><br><span class="line">*.a</span><br><span class="line"><span class="comment"># but do track lib.a, even though you're ignoring .a files above</span></span><br><span class="line">!<span class="class"><span class="keyword">lib</span>.<span class="title">a</span></span></span><br><span class="line"><span class="comment"># only ignore the TODO file in the current directory, not subdir/TODO</span></span><br><span class="line">/TODO</span><br><span class="line"><span class="comment"># ignore all files in the build/ directory</span></span><br><span class="line">build/</span><br><span class="line"><span class="comment"># ignore doc/notes.txt, but not doc/server/arch.txt</span></span><br><span class="line">doc/*.txt</span><br><span class="line"><span class="comment"># ignore all .pdf files in the doc/ directory</span></span><br><span class="line">doc/**<span class="regexp">/*.pdf</span></span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      获取/克隆仓库、检查文件状态、跟踪新文件、暂存已修改文件、忽略文件
    
    </summary>
    
      <category term="Git教程" scheme="https://www.saintslove.top/categories/Git%E6%95%99%E7%A8%8B/"/>
    
    
      <category term="git" scheme="https://www.saintslove.top/tags/git/"/>
    
      <category term="集中式版本控制" scheme="https://www.saintslove.top/tags/%E9%9B%86%E4%B8%AD%E5%BC%8F%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="https://www.saintslove.top/2018/04/26/hello-world/"/>
    <id>https://www.saintslove.top/2018/04/26/hello-world/</id>
    <published>2018-04-26T09:03:09.000Z</published>
    <updated>2018-05-09T14:31:51.592Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><span id="inline-yellow">Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post.<br>Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info.<br>If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.<br></span></p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p><span id="inline-green">More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a><br></span></p><font color="blue" size="3"><br><i class="fa fa-pencil"></i>支持Markdown<br></font><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p><span id="inline-blue">More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a><br></span></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p><span id="inline-purple">More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a><br></span></p><h3 id="Deploy-to-remote-sites-Download-Now"><a href="#Deploy-to-remote-sites-Download-Now" class="headerlink" title="Deploy to remote sites   Download Now "></a>Deploy to remote sites  <a id="download" href="https://git-scm.com/download/win" target="_blank" rel="noopener"><i class="fa fa-download"></i><span> Download Now</span> </a></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p><span id="inline-orange">More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a><br></span></p>        <div id="aplayer-FdyKuZlC" class="aplayer aplayer-tag-marker" style="margin-bottom: 20px;"></div>  <script>  var options = {"narrow":false,"autoplay":false,"showlrc":3,"mutex":true,"music":[{"title":"成都","author":"赵雷","url":"http://p7vw4w30r.bkt.clouddn.com/%E8%B5%B5%E9%9B%B7%20-%20%E6%88%90%E9%83%BD.mp3","pic":"http://p7vw4w30r.bkt.clouddn.com/%E6%88%90%E9%83%BD.jpg","lrc":"http://p7vw4w30r.bkt.clouddn.com/%E6%88%90%E9%83%BD_%E6%AD%8C%E8%AF%8D.lrc"}]};  options.element = document.getElementById("aplayer-FdyKuZlC");  var ap = new APlayer(options);    window.aplayers || (window.aplayers = []);  window.aplayers.push(ap);  </script>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla
      
    
    </summary>
    
    
  </entry>
  
</feed>
